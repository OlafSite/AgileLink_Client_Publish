import{q as Be,r as s,u as Ee,b as Re,a as Te,s as ke,m as _,w as xe,d as Z,e as U,o as k,f as x,j as o,t as m,g as l,h as n,y as c,Y as Pe,R as be,ad as Ye,ae as qe,F as I,O as A,k as b,v as C,a3 as L,a4 as w,aa as W,W as G,i as h,af as Ae,a6 as ee,E as F,p as Le,n as We,_ as Ge}from"./index-4d5b55f1.js";const d=B=>(Le("data-v-1af5c691"),B=B(),We(),B),He={class:"box"},Ke=d(()=>o("div",{class:"header"}," 概览 ",-1)),Qe={class:"left-col"},Xe={class:"info"},Ze=d(()=>o("div",{class:"avatar"},null,-1)),eo={class:"text"},oo={class:"title"},to=d(()=>o("div",{class:"builder"},"项目创建人",-1)),lo={style:{display:"inline-block","margin-left":"20px","font-size":"14px",color:"var(--color-brand3-7, #62656f)"}},ao=d(()=>o("br",null,null,-1)),no=d(()=>o("div",{class:"description"},"项目描述",-1)),so={style:{display:"inline-block","margin-left":"20px","font-size":"14px",color:"var(--color-brand3-7, #62656f)"}},io={class:"doc_region"},co=d(()=>o("div",{style:{"margin-left":"20px","margin-top":"20px","font-size":"18px","margin-bottom":"20px"}},"共享文档",-1)),ro=d(()=>o("div",{class:"create-doc"},"DOC",-1)),uo=d(()=>o("div",{class:"create-fold"},"文件夹",-1)),po={class:"plus-icon"},_o={style:{"margin-left":"35px"}},fo=["onClick","onMouseenter","onMouseleave"],vo={class:"folder-block"},mo=Ae('<div class="folder" data-v-1af5c691><div class="paper one" data-v-1af5c691></div><div class="paper two" data-v-1af5c691></div><div class="paper three" data-v-1af5c691></div><div class="paper four" data-v-1af5c691></div></div>',1),ho={class:"folder-name"},go={class:"icon-close"},yo=["onClick","onMouseenter","onMouseleave"],ko={class:"folder-block"},xo=d(()=>o("div",{class:"icons"},[o("div",{class:"icon icon--doc"},[o("i",{title:"doc"})])],-1)),bo={class:"folder-name"},Co={class:"icon-close"},wo={class:"right-col"},Vo={class:"design_region"},Do=d(()=>o("div",{style:{"margin-left":"20px","margin-top":"20px","font-size":"18px","margin-bottom":"20px"}},"原型设计",-1)),So={class:"create-doc-block"},Mo={class:"create-fold-block"},No={class:"plus-icon"},$o=d(()=>o("br",null,null,-1)),jo=d(()=>o("br",null,null,-1)),zo=d(()=>o("br",null,null,-1)),Oo={style:{"margin-left":"35px"}},Jo=["onClick","onMouseenter","onMouseleave"],Uo={class:"folder-block"},Io={class:"folder-name",style:{"padding-left":"20%"}},Fo={class:"icon-close"},Bo=["onClick","onMouseenter","onMouseleave"],Eo={class:"folder-block"},Ro={class:"folder-name",style:{"padding-left":"20%"}},To={class:"icon-close"},Po={class:"member"},Yo=d(()=>o("div",{style:{float:"left","margin-left":"20px","margin-top":"20px","font-size":"18px"}},"最近",-1)),qo={class:"editor_name"},Ao=d(()=>o("div",{class:"editor_name",style:{"margin-left":"20px"}},"在",-1)),Lo={class:"edit_time"},Wo=d(()=>o("div",{class:"editor_name",style:{"margin-left":"10px"}},"编辑了本项目",-1)),Go={class:"dialog-footer",style:{"margin-top":"500px"}},Ho={class:"dialog-footer"},Ko={class:"dialog-footer"},Qo={class:"dialog-footer"},Xo=d(()=>o("div",{class:"dialog-title"},"此操作将删除该文件（夹）",-1)),Zo={class:"dialog-footer"},et=Be({__name:"project",setup(B){s(null),s(null);const M=s(null);s(!1);const N=s(!1),E=s(!1);s("New York");const g=Ee(),D=Re(),f=Te(),oe=s(""),te=s(""),le=s(""),ae=s(null),ne=s(null),se=s(null);s([]);const ie=s([]),ce=s([]);s([]),ke(()=>{pe(),ve(),H(),g.commit("saveProject",f.params.pid)});function H(){_({url:"#/api/v1/prototype_design/get_all_pages",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid})}).then(e=>{ce.value=e.data.data.pages1,ie.value=e.data.data.pages2}).catch(e=>{console.log(e)})}function Ce(e){_({url:"#/api/v1/prototype_design/delete_page",method:"post",data:JSON.stringify({token:p().token,page_id:e.id})}).then(a=>{console.log("This is delete"),console.log(a.data),H(),alert("删除成功")}).catch(a=>{console.log(a)})}function we(e){_({url:"#/api/v1/prototype_design/delete_page",method:"post",data:JSON.stringify({token:p().token,page_id:e.id})}).then(a=>{H(),alert("删除成功")}).catch(a=>{console.log(a)})}function Ve(e){_({url:"#/api/v1/prototype_design/create_page",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid,type:2,name:"newForm",introduction:"This is a new Form"})}).then(a=>{a.data.errno===0&&(g.commit("editform",a.data.data.page_id),D.push("../formdesign"))}).catch(a=>{console.log(a)})}function De(e){_({url:"#/api/v1/prototype_design/create_page",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid,type:1,name:"newScreen",introduction:"This is a new Screen"})}).then(a=>{a.data.errno===0&&(g.commit("editscreen",a.data.data.page_id),D.push("../datascreen"))}).catch(a=>{console.log(a)})}const de=e=>{ee.confirm("确定要取消重命名吗？").then(()=>{N.value=!1,M.value="",R.value=null,e()}).catch(()=>{})},Se=e=>{ee.confirm("确定要取消删除文件（夹）吗？").then(()=>{e()}).catch(()=>{})},R=s(null),K=s(null),T=s(!1),$=s("");function re(){ee.confirm("确定要取消重命名吗？").then(()=>{T.value=!1,$.value="",K.value=null,done()}).catch(()=>{})}function Q(e){R.value=e,N.value=!0}function ue(e,a){E.value=!0}function p(){return g.getters.getUserinfo}xe(D,()=>{pe()});function pe(){_({url:"#/api/v1/project_manage/show_single_project_info",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid})}).then(e=>{console.log(e),g.commit("initProject",e.data.data),ne.value=e.data.data.creator_username,ae.value=e.data.data.name,se.value=e.data.data.introduction,oe.value=e.data.data.create_time,te.value=e.data.data.editor_username,le.value=e.data.data.edit_time}).catch(e=>{console.log(e)})}function Me(e){console.log(e),g.commit("initDoc",JSON.parse(JSON.stringify(e))),D.push("../doc")}function Ne(e){g.commit("editform",e.id),D.push("../formdesign")}function _e(e){g.commit("editscreen",e.id),D.push("../datascreen")}function $e(){_({url:"#/api/v1/doc_edit/rename_doc/",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid,doc_id:R.value.document_id,rename:M.value,reintroduction:""})}).then(e=>{console.log(e.data),e.data.errno===0&&(M.value="",R.value=null,N.value=!1,Y(),F.success("重命名成功"))}).catch(e=>{console.log(e)})}function je(){_({url:"#/api/v1/doc_edit/rename_dictionary/",method:"post",data:JSON.stringify({token:p().token,dictionary_id:K.value.dictionary_id,rename:$.value})}).then(e=>{console.log(e.data),e.data.errno===0&&($.value="",K.value=null,T.value=!1,Y(),F.success("重命名成功"))}).catch(e=>{console.log(e)})}const S=Z({name:""});Z({name:"",introduction:""});const P=s(null);s(null);const v=s(null);ke(()=>{ve()});function Y(){_({url:"#/api/v1/doc_edit/show_file_tree/",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid})}).then(e=>{console.log(e),P.value=e.data.data,v.value=ye(P.value),console.log(v.value)}).catch(e=>{console.log(e)})}const j=s(!1),q=s(!1);function fe(){S.name="",j.value=!1}const y=Z({name:"",introduction:"",module:""});function ze(){q.value=!0}function X(){q.value=!1,y.name="",y.introduction=""}function Oe(){j.value=!0}function Je(){_({url:"#/api/v1/doc_edit/create_doc/",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid,name:y.name,introduction:y.introduction,dictionary_id:v.value.dictionary_id})}).then(e=>{console.log(e),e.data.errno===0&&(g.commit("changeModule",y.module),X(),Y(),F.success("创建成功"))}).catch(e=>{console.log(e)})}function Ue(){_({url:"#/api/v1/doc_edit/create_dictionary/",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid,name:S.name,parent_id:v.value.dictionary_id})}).then(e=>{console.log(e),e.data.errno===1009&&(S.name="",F.error("已存在同级同名文件夹")),e.data.errno===0&&(Y(),j.value=!1,S.name="",F.success("创建成功"))}).catch(e=>{console.log(e)})}function ve(){console.log(f.params.pid),_({url:"#/api/v1/doc_edit/show_file_tree/",method:"post",data:JSON.stringify({token:p().token,project_id:f.params.pid})}).then(e=>{console.log(e),P.value=e.data.data,v.value=e.data.data}).catch(e=>{console.log(e)})}const me=s([]),he=s([]);xe(()=>v.value,(e,a)=>{me.value=e.sub_dictionaries,he.value=e.documents_info},{deep:!0});function Ie(e){v.value=e}function Fe(){v.value=ge(P.value,v.value)}function ge(e,a){for(let r of e.sub_dictionaries)if(r.dictionary_id===a.dictionary_id)return e;for(let r of e.sub_dictionaries){let z=ge(r,a);if(z)return z}}function ye(e){if(e.dictionary_id===v.value.dictionary_id)return e;for(let a of e.sub_dictionaries){let r=ye(a);if(r)return r}}return(e,a)=>{const r=U("el-icon"),z=U("el-popover"),u=U("el-button"),O=U("el-input"),J=U("el-dialog");return k(),x(I,null,[o("div",He,[Ke,o("div",Qe,[o("div",Xe,[Ze,o("div",eo,[o("div",oo,m(ae.value),1),to,o("div",lo,m(ne.value)+" 创建于 "+m(oe.value),1),ao,no,o("div",so,m(se.value),1)])]),o("div",io,[co,o("div",{class:"back-icon",onClick:Fe},[l(r,null,{default:n(()=>[l(c(Pe))]),_:1})]),l(z,{placement:"left-end",width:200,trigger:"click"},{reference:n(()=>[o("div",po,[l(r,null,{default:n(()=>[l(c(be))]),_:1})])]),default:n(()=>[o("div",{class:"create-doc-block",onClick:ze},[l(r,{size:"30"},{default:n(()=>[l(c(Ye),{style:{position:"relative",top:"5px",left:"10px",color:"rgb(83, 131, 236)"}})]),_:1}),ro]),o("div",{class:"create-fold-block",onClick:Oe},[l(r,{size:"30"},{default:n(()=>[l(c(qe),{style:{position:"relative",top:"5px",left:"10px",color:"rgb(250, 226, 175)"}})]),_:1}),uo])]),_:1}),o("div",_o,[o("ul",null,[(k(!0),x(I,null,A(me.value,(t,V)=>(k(),x("li",{key:V,onClick:i=>Ie(t),onMouseenter:i=>t.show=!0,onMouseleave:i=>t.show=!1},[o("div",vo,[mo,o("div",ho,m(t.dictionary_name),1),b(l(u,{icon:c(L),circle:"",onClick:w(i=>Q(t),["stop"]),style:{float:"right",position:"absolute",top:"10px",right:"10px"}},null,8,["icon","onClick"]),[[C,t.show]]),b(o("div",go,[l(r,null,{default:n(()=>[l(c(W),{onClick:w(i=>ue(t),["stop"])},null,8,["onClick"])]),_:2},1024)],512),[[C,t.show]])])],40,fo))),128)),(k(!0),x(I,null,A(he.value,(t,V)=>(k(),x("li",{key:V,onClick:i=>Me(t),onMouseenter:i=>t.show=!0,onMouseleave:i=>t.show=!1},[o("div",ko,[xo,o("div",bo,m(t.document_name),1),b(l(u,{icon:c(L),circle:"",onClick:w(i=>Q(t),["stop"]),style:{float:"right",position:"absolute",top:"10px",right:"10px"}},null,8,["icon","onClick"]),[[C,t.show]]),b(o("div",Co,[l(r,null,{default:n(()=>[l(c(W),{onClick:w(i=>ue(t),["stop"])},null,8,["onClick"])]),_:2},1024)],512),[[C,t.show]])])],40,yo))),128))])])])]),o("div",wo,[o("div",Vo,[Do,l(z,{placement:"left-end",width:200,trigger:"click"},{reference:n(()=>[o("div",No,[l(r,null,{default:n(()=>[l(c(be))]),_:1})])]),default:n(()=>[o("div",So,[l(c(G),{icon:["fas","object-group"],style:{"font-size":"30px",position:"relative",top:"4.5px",left:"10px"}}),o("div",{class:"create-complex",onClick:De},"复杂原型")]),o("div",Mo,[l(c(G),{icon:["fas","bars"],style:{"font-size":"30px",position:"relative",top:"4.5px",left:"14px"}}),o("div",{class:"create-easy",onClick:Ve},"简易原型")])]),_:1}),$o,jo,zo,o("div",Oo,[o("ul",null,[(k(!0),x(I,null,A(ie.value,(t,V)=>(k(),x("li",{key:V,onClick:i=>Ne(t),onMouseenter:i=>t.show=!0,onMouseleave:i=>t.show=!1},[o("div",Uo,[l(c(G),{icon:["fas","bars"],style:{"font-size":"30px",position:"relative",top:"-20px",left:"14px"}}),o("div",Io,m(t.name),1),b(l(u,{icon:c(L),circle:"",onClick:w(i=>_e(t),["stop"]),style:{float:"right",position:"absolute",top:"10px",right:"10px"}},null,8,["icon","onClick"]),[[C,t.show]]),b(o("div",Fo,[l(r,null,{default:n(()=>[l(c(W),{onClick:w(i=>we(t),["stop"])},null,8,["onClick"])]),_:2},1024)],512),[[C,t.show]])])],40,Jo))),128)),(k(!0),x(I,null,A(ce.value,(t,V)=>(k(),x("li",{key:V,onClick:i=>_e(t),onMouseenter:i=>t.show=!0,onMouseleave:i=>t.show=!1},[o("div",Eo,[l(c(G),{icon:["fas","object-group"],style:{"font-size":"30px",position:"relative",top:"-15px",left:"14px"}}),o("div",Ro,m(t.name),1),b(l(u,{icon:c(L),circle:"",onClick:w(i=>Q(t),["stop"]),style:{float:"right",position:"absolute",top:"10px",right:"10px"}},null,8,["icon","onClick"]),[[C,t.show]]),b(o("div",To,[l(r,null,{default:n(()=>[l(c(W),{onClick:w(i=>Ce(t),["stop"])},null,8,["onClick"])]),_:2},1024)],512),[[C,t.show]])])],40,Bo))),128))])])]),o("div",Po,[Yo,o("div",qo,m(te.value),1),Ao,o("div",Lo,m(le.value),1),Wo])])]),l(J,{modelValue:q.value,"onUpdate:modelValue":a[2]||(a[2]=t=>q.value=t),title:"创建新文件",width:"30%","before-close":X,style:{"border-radius":"20px"}},{footer:n(()=>[o("span",Go,[l(u,{onClick:X},{default:n(()=>[h("取消")]),_:1}),l(u,{type:"primary",style:{"background-color":"#1b9aee !important"},onClick:Je},{default:n(()=>[h(" 确定 ")]),_:1})])]),default:n(()=>[l(O,{modelValue:y.name,"onUpdate:modelValue":a[0]||(a[0]=t=>y.name=t),placeholder:"请输入文件名称",clearable:"",maxlength:"20",style:{"font-size":"16px","margin-bottom":"15px"}},null,8,["modelValue"]),l(O,{modelValue:y.introduction,"onUpdate:modelValue":a[1]||(a[1]=t=>y.introduction=t),placeholder:"请输入文件介绍",clearable:"",maxlength:"20",style:{"font-size":"16px","margin-bottom":"15px"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(J,{modelValue:j.value,"onUpdate:modelValue":a[4]||(a[4]=t=>j.value=t),title:"创建新文件夹",width:"30%","before-close":fe,style:{"border-radius":"20px"}},{footer:n(()=>[o("span",Ho,[l(u,{onClick:fe},{default:n(()=>[h("取消")]),_:1}),l(u,{type:"primary",style:{"background-color":"#1b9aee !important"},onClick:Ue},{default:n(()=>[h(" 确定 ")]),_:1})])]),default:n(()=>[l(O,{modelValue:S.name,"onUpdate:modelValue":a[3]||(a[3]=t=>S.name=t),placeholder:"请输入文件夹名称",clearable:"",maxlength:"20",style:{"font-size":"16px","margin-bottom":"15px"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(J,{modelValue:N.value,"onUpdate:modelValue":a[6]||(a[6]=t=>N.value=t),title:"重命名",width:"30%","before-close":de,style:{"border-radius":"20px"}},{footer:n(()=>[o("span",Ko,[l(u,{onClick:de},{default:n(()=>[h("取消")]),_:1}),l(u,{type:"primary",style:{"background-color":"#1b9aee !important"},onClick:$e},{default:n(()=>[h(" 确定 ")]),_:1})])]),default:n(()=>[l(O,{modelValue:M.value,"onUpdate:modelValue":a[5]||(a[5]=t=>M.value=t),placeholder:"请输入新名称",clearable:"",maxlength:"20",style:{"font-size":"16px"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(J,{modelValue:T.value,"onUpdate:modelValue":a[8]||(a[8]=t=>T.value=t),title:"重命名",width:"30%","before-close":re,style:{"border-radius":"20px"}},{footer:n(()=>[o("span",Qo,[l(u,{onClick:re},{default:n(()=>[h("取消")]),_:1}),l(u,{type:"primary",style:{"background-color":"#1b9aee !important"},onClick:je},{default:n(()=>[h(" 确定 ")]),_:1})])]),default:n(()=>[l(O,{modelValue:$.value,"onUpdate:modelValue":a[7]||(a[7]=t=>$.value=t),placeholder:"请输入新名称",clearable:"",maxlength:"20",style:{"font-size":"16px"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(J,{modelValue:E.value,"onUpdate:modelValue":a[10]||(a[10]=t=>E.value=t),title:"提醒",width:"30%","before-close":Se,style:{"border-radius":"20px"}},{footer:n(()=>[o("span",Zo,[l(u,{onClick:a[9]||(a[9]=t=>E.value=!1)},{default:n(()=>[h("取消")]),_:1}),l(u,{type:"primary",style:{"background-color":"#1b9aee !important"}},{default:n(()=>[h(" 确定 ")]),_:1})])]),default:n(()=>[Xo]),_:1},8,["modelValue"])],64)}}});const tt=Ge(et,[["__scopeId","data-v-1af5c691"]]);export{tt as default};
