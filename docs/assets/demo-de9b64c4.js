import{v as g,M as f,j as y,n as C,E as v,l as U,H as N,o as b,p as k,q as F,C as M,r as B,s as J}from"./index-973c9190.js";import{_ as R,e as c,o as n,f as i,g as l,j as r,Z as w,F as u,i as d,t as s,Q as S,ag as x}from"./index-4d5b55f1.js";const m=e=>e[Math.floor(Math.random()*e.length)];function E(){console.log(x)}const T={components:{EditorContent:g,MenuBar:f},data(){return{currentUser:JSON.parse(localStorage.getItem("currentUser"))||{name:this.getRandomName(),color:this.getRandomColor()},provider:null,editor:null,status:"connecting",room:"谢秉书的房间",content:""}},mounted(){const e=new y;this.provider=new C({appId:"7j9y6m10",name:this.room,document:e}),this.provider.on("status",o=>{this.status=o.status}),this.editor=new v({extensions:[U.configure({history:!1}),N,b,k,F,M.configure({document:e}),B.configure({provider:this.provider,user:this.currentUser}),J.configure({limit:1e4})]}),localStorage.setItem("currentUser",JSON.stringify(this.currentUser))},methods:{setName(){const e=(window.prompt("Name")||"").trim().substring(0,32);if(e)return this.updateCurrentUser({name:e})},test(){E()},updateCurrentUser(e){this.currentUser={...this.currentUser,...e},this.editor.chain().focus().updateUser(this.currentUser).run(),localStorage.setItem("currentUser",JSON.stringify(this.currentUser))},getRandomColor(){return m(["#958DF1","#F98181","#FBBC88","#FAF594","#70CFF8","#94FADB","#B9F18D"])},getRandomName(){return m(["Lea Thompson","Cyndi Lauper","Tom Cruise","Madonna","Jerry Hall","Joan Collins","Winona Ryder","Christina Applegate","Alyssa Milano","Molly Ringwald","Ally Sheedy","Debbie Harry","Olivia Newton-John","Elton John","Michael J. Fox","Axl Rose","Emilio Estevez","Ralph Macchio","Rob Lowe","Jennifer Grey","Mickey Rourke","John Cusack","Matthew Broderick","Justine Bateman","Lisa Bonet"])}},beforeUnmount(){this.editor.destroy(),this.provider.destroy()}},A={key:0,class:"editor"},D={class:"editor__footer"},I={class:"editor__name"};function L(e,o,H,O,t,a){const h=c("menu-bar"),_=c("editor-content");return t.editor?(n(),i("div",A,[l(h,{class:"editor__header",editor:t.editor},null,8,["editor"]),l(_,{class:"editor__content",editor:t.editor},null,8,["editor"]),r("div",D,[r("div",{class:w(`editor__status editor__status--${t.status}`)},[t.status==="connected"?(n(),i(u,{key:0},[d(s(t.editor.storage.collaborationCursor.users.length)+" user"+s(t.editor.storage.collaborationCursor.users.length===1?"":"s")+" online in "+s(t.room),1)],64)):(n(),i(u,{key:1},[d(" offline ")],64))],2),r("div",I,[r("button",{onClick:o[0]||(o[0]=(...p)=>a.setName&&a.setName(...p))},s(t.currentUser.name),1)])])])):S("",!0)}const z=R(T,[["render",L]]);export{z as default};
